/**
 * skylark-domx-carets - The skylark carets library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,e){var r=e.define,require=e.require,n="function"==typeof r&&r.amd,a=!n&&"undefined"!=typeof exports;if(!n&&!r){var s={};r=e.define=function(t,e,r){"function"==typeof r?(s[t]={factory:r,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var r=e.split("/"),n=t.split("/");r.pop();for(var a=0;a<n.length;a++)"."!=n[a]&&(".."==n[a]?r.pop():r.push(n[a]));return r.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):s[t]={factory:null,resolved:!0,exports:r}},require=e.require=function(t){if(!s.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=s[t];if(!module.resolved){var r=[];module.deps.forEach(function(t){r.push(require(t))}),module.exports=module.factory.apply(e,r)||null,module.resolved=!0}return module.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-domx-carets/carets",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-data"],function(t,e,r,n){"use strict";var a=/\r/g;function s(t,e){var r=n.val(t).replace(a,""),s=r.length;return void 0===e&&(e=s),(e=Math.floor(e))<0&&(e=s+e),e<0&&(e=0),e>s&&(e=s),e}var l=function(t,e,r,n){this.start=t||0,this.end=e||0,this.length=r||0,this.text=n||""};function o(t){if(t)return t.selectionStart}function i(t,e){return t.focus(),e=s(t,e),t.setSelectionRange(e,e),this}function u(t,e){var r=_getCaret(t),s=n.val(t).replace(a,""),l=+(r+e.length+(s.length-r)),o=+t.getAttribute("maxlength");if(_hasAttr(t,"maxlength")&&l>o){var u=e.length-(l-o);e=e.substr(0,u)}return n.val(t,s.substr(0,r)+e+s.substr(r)),i(t,r+e.length),this}function c(t){if(t){var e=new l;e.start=t.selectionStart,e.end=t.selectionEnd;var r=Math.min(e.start,e.end),a=Math.max(e.start,e.end);return e.length=a-r,e.text=n.val(t).substring(r,a),e}}function f(t,e,r){return e=s(t,e),r=s(t,r),t.setSelectionRange(e,r),this}function d(t,e){var r=n.val(t),a=c(t),s=+(a.start+e.length+(r.length-a.end)),l=+n.attr(t,"maxlength");if(l&&s>l){var o=e.length-(s-l);e=e.substr(0,o)}var i=r.substr(0,a.start),u=r.substr(a.end);n.val(t,i+e+u);var d=a.start,g=d+e.length;return f(t,a.length?d:g,g),this}function g(){return g}return l.prototype.toString=function(){return JSON.stringify(this,null,"    ")},e.mixin(g,{getCaret:o,setCaret:i,insertAtCaret:u,getInputRange:c,setInputRange:f,replaceInputRange:d,selectAll:function(t){if(t.select)return t.select(),this;var e=window.getSelection(),r=document.createRange();return r.selectNodeContents(t),e.removeAllRanges(),e.addRange(r),this},deselectAll:function(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges();return this},caret:function(t,e){if(void 0===e)return o(t);"number"==typeof e?i(t,e):u(t,e);return this},range:function(t,e,r){if(void 0===e)return c(t);if("number"==typeof e){var n=e,a=r;f(t,n,a)}else{var s=e;d(t,s)}return this}}),t.attach("domx.carets",g)}),t("skylark-domx-carets/main",["skylark-langx/langx","./carets","skylark-domx-velm","skylark-domx-query","skylark-domx-eventer"],function(t,e,r,n){return r.delegate(["caret","insertAtCaret","range","selectAll"],e),n.fn.caret=n.wraps.wrapper_value(e.caret,e,e.caret),n.fn.range=n.wraps.wrapper_value(e.range,e,e.range),e}),t("skylark-domx-carets",["skylark-domx-carets/main"],function(t){return t})}(r),!n){var l=require("skylark-langx/skylark");a?module.exports=l:e.skylarkjs=l}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-carets.js.map
